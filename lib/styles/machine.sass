@import './common'

.atom
  position: relative

  .atom-name-edit input
    @include no-appearance
    color: $color-binding
    font-family: $font-monospace
    padding-top: 0.1em
    position: absolute

    &::placeholder
      color: #ccc

  .atom-code
    background: $color-page-bg
    border-bottom: 1px dotted #f0f0f0
    border-top: 1px dotted #f0f0f0
    cursor: text
    margin: 0 -1em 0.5em
    padding: 0.5em 1em

    *
      cursor: text

  .atom-lower
    padding: 0.4em
      bottom: 0
    position: relative

  .atom-name
    font-family: $font-monospace
    font-size: 1.1em
    padding-right: 0.3em
    .name
      visibility: hidden
    .binding
      padding-left: 0.5em

  .atom-result
    position: relative
    z-index: 1 // TODO: centralize?

    > .janus-inspect-entity, > .janus-literal
      font-size: 1.1em

    .janus-inspect-panel
      border: 1px dotted #ddd
      box-shadow: none
      margin: 1em -0.6em 0

  ////////////////////////////////////////
  // button things
  // TODO: the classing here is a bit of a mess.

  > button, .atom-panel button
    font-size: 1.3em
    opacity: 0
    position: absolute

  button
    @include no-appearance
    transition: opacity 0.3s ease-out
  &:hover
    > button, .atom-panel button
      opacity: 0.08
      transition: none
  button:hover, .atom-panel button:hover
    opacity: 1

  &:hover + .atom .atom-insert
    opacity: 0.08
    transition: none

  .atom-insert
    display: block
    left: 0
    top: -0.75em
    width: 100%
    &::before, &::after
      @include reify
      border-top: 1px solid #000
      position: absolute
      top: 0.7em
      width: calc(50% - 0.8em)
    &::before
      left: 0
    &::after
      right: 0

  .atom-remove, .atom-panel button
    padding: 0 0.3em
  .atom-remove
    right: 0.4em
    top: 0.05em
  .atom-panel button
    right: -0.45em
    top: 0.2em

  ////////////////////////////////////////
  // state toggles

  &.is-panel .atom-panel button
    color: $color-accent
    opacity: 1

  .atom-panel
    display: none
  &.has-result .atom-panel
    display: block

  .atom-name .binding
    color: #ccc
  &.has-name .atom-name .binding
    color: #666


.assembly .atom
  padding: 1em


////////////////////////////////////////
// valuator
// (TODO: probably not here?)

.valuator
  @include panel(valuator)
  width: 30em

  .valuator-close
    @include no-appearance
    padding: 0.35em 0.7em
    position: absolute
    right: 0
    top: 0

  .valuator-pair
    font-size: 1.1em
    padding-bottom: 0.3em
    .k
      color: $color-binding
    .k, .eq
      font-family: $font-monospace

  .valuator-result
    font-size: 1.1em
    padding: 0.3em 0

    .janus-inspect-panel
      // TODO: copied from atom
      border: 1px dotted #ddd
      box-shadow: none
      margin: 0 -0.6em 1.8em

  .valuator-offer
    @include no-appearance
    bottom: 0.7em
    display: none
    font-size: 1.4em
    padding: 0 0.2em
    position: absolute
    right: 0.5em
  &.offerable .valuator-offer
    display: block

